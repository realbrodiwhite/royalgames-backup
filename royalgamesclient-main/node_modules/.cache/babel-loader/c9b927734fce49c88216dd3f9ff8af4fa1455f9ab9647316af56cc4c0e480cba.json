{"ast":null,"code":"import { ExtensionType, settings, extensions as extensions$1 } from '@pixi/core';\nlet storedGl;\nlet extensions;\nfunction getCompressedTextureExtensions() {\n  extensions = {\n    s3tc: storedGl.getExtension(\"WEBGL_compressed_texture_s3tc\"),\n    s3tc_sRGB: storedGl.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\"),\n    etc: storedGl.getExtension(\"WEBGL_compressed_texture_etc\"),\n    etc1: storedGl.getExtension(\"WEBGL_compressed_texture_etc1\"),\n    pvrtc: storedGl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || storedGl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n    atc: storedGl.getExtension(\"WEBGL_compressed_texture_atc\"),\n    astc: storedGl.getExtension(\"WEBGL_compressed_texture_astc\")\n  };\n}\nconst detectCompressedTextures = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 2\n  },\n  test: async () => {\n    const canvas = settings.ADAPTER.createCanvas();\n    const gl = canvas.getContext(\"webgl\");\n    if (!gl) {\n      console.warn(\"WebGL not available for compressed textures.\");\n      return false;\n    }\n    storedGl = gl;\n    return true;\n  },\n  add: async formats => {\n    if (!extensions) getCompressedTextureExtensions();\n    const textureFormats = [];\n    for (const extensionName in extensions) {\n      const extension = extensions[extensionName];\n      if (!extension) {\n        continue;\n      }\n      textureFormats.push(extensionName);\n    }\n    return [...textureFormats, ...formats];\n  },\n  remove: async formats => {\n    if (!extensions) getCompressedTextureExtensions();\n    return formats.filter(f => !(f in extensions));\n  }\n};\nextensions$1.add(detectCompressedTextures);\nexport { detectCompressedTextures };","map":{"version":3,"mappings":";AAKA,IAAIA;AACJ,IAAIC;AAEJ,SACAC;EACiBD;IACTE,MAAMH,QAAS,cAAa,+BAA+B;IAC3DI,WAAWJ,QAAS,cAAa,oCAAoC;IACrEK,KAAKL,QAAS,cAAa,8BAA8B;IACzDM,MAAMN,QAAS,cAAa,+BAA+B;IAC3DO,OAAOP,QAAS,cAAa,gCAAgC,CACtD,aAASQ,aAAa,uCAAuC;IACpEC,KAAKT,QAAS,cAAa,8BAA8B;IACzDU,MAAMV,QAAS,cAAa,+BAA+B;EAAA,CAC/D;AACJ;AAEO,MAAMW,wBAA2B;EACpCC,SAAW;IACPC,MAAMC,aAAc;IACpBC,QAAU;EAAA,CACd;EACAC,MAAM,YACN;IAEU,eAASC,QAAS,SAAQC,YAAa;IACvC,WAAKC,MAAO,YAAW,OAAO;IAEpC,IAAI,CAACC,EACL;MAEIC,QAAQC,KAAK,8CAA8C;MAGpD;IAAA;IAGAtB;IAEJ;EAAA,CACX;EACAuB,KAAK,MAAOC,OACZ;IACI,IAAI,CAACvB,YAA2CC;IAEhD,MAAMuB,iBAAiB,EAAC;IAGxB,WAAWC,iBAAiBzB,UAC5B;MACI,MAAMW,YAAYX,UAAW;MAE7B,IAAI,CAACW,SACL;QACI;MAAA;MAGJa,eAAeE,KAAKD,aAAa;IAAA;IAGrC,OAAO,CAAC,GAAGD,cAAgB,KAAGD,OAAO;EAAA,CACzC;EACAI,QAAQ,MAAOJ,OACf;IACI,IAAI,CAACvB,YAA2CC;IAEhD,OAAOsB,QAAQK,MAAO,CAACC,CAAM,WAAO7B,UAAW;EAAA;AAEvD;AAEA8B,aAAIR,IAAIZ,wBAAwB","names":["storedGl","extensions","getCompressedTextureExtensions","s3tc","s3tc_sRGB","etc","etc1","pvrtc","getExtension","atc","astc","detectCompressedTextures","extension","type","ExtensionType","priority","test","settings","createCanvas","canvas","gl","console","warn","add","formats","textureFormats","extensionName","push","remove","filter","f","ext"],"sources":["/workspaces/royalgames/royalgamesclient-main/node_modules/@pixi/compressed-textures/src/loaders/detectCompressedTextures.ts"],"sourcesContent":["import { extensions as ext, ExtensionType, settings } from '@pixi/core';\n\nimport type { FormatDetectionParser } from '@pixi/assets';\nimport type { CompressedTextureExtensionRef, CompressedTextureExtensions } from './compressedTextureExtensions';\n\nlet storedGl: WebGLRenderingContext;\nlet extensions: Partial<CompressedTextureExtensions>;\n\nfunction getCompressedTextureExtensions()\n{\n    extensions = {\n        s3tc: storedGl.getExtension('WEBGL_compressed_texture_s3tc'),\n        s3tc_sRGB: storedGl.getExtension('WEBGL_compressed_texture_s3tc_srgb'), /* eslint-disable-line camelcase */\n        etc: storedGl.getExtension('WEBGL_compressed_texture_etc'),\n        etc1: storedGl.getExtension('WEBGL_compressed_texture_etc1'),\n        pvrtc: storedGl.getExtension('WEBGL_compressed_texture_pvrtc')\n            || storedGl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc'),\n        atc: storedGl.getExtension('WEBGL_compressed_texture_atc'),\n        astc: storedGl.getExtension('WEBGL_compressed_texture_astc')\n    } as Partial<CompressedTextureExtensions>;\n}\n\nexport const detectCompressedTextures = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 2,\n    },\n    test: async (): Promise<boolean> =>\n    {\n        // Auto-detect WebGL compressed-texture extensions\n        const canvas = settings.ADAPTER.createCanvas();\n        const gl = canvas.getContext('webgl');\n\n        if (!gl)\n        {\n            // #if _DEBUG\n            console.warn('WebGL not available for compressed textures.');\n            // #endif\n\n            return false;\n        }\n\n        storedGl = gl;\n\n        return true;\n    },\n    add: async (formats: string[]): Promise<string[]> =>\n    {\n        if (!extensions) getCompressedTextureExtensions();\n\n        const textureFormats = [];\n\n        // Assign all available compressed-texture formats\n        for (const extensionName in extensions)\n        {\n            const extension = extensions[extensionName as CompressedTextureExtensionRef];\n\n            if (!extension)\n            {\n                continue;\n            }\n\n            textureFormats.push(extensionName);\n        }\n\n        return [...textureFormats, ...formats];\n    },\n    remove: async (formats: string[]): Promise<string[]> =>\n    {\n        if (!extensions) getCompressedTextureExtensions();\n\n        return formats.filter((f) => !(f in extensions));\n    },\n} as FormatDetectionParser;\n\next.add(detectCompressedTextures);\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}